@use "variables";
@use "mixin" as *;

body {
   @include background($color: variables.$color-background);

   p {
      @include margin($vertical: 0.25rem);
   }

   li {
      @include margin($vertical: 0.25rem);
   }

   h1 {
      @include margin($vertical: 1rem);
   }

   h2 {
      @include margin($vertical: 0.5rem);
   }

   h3 {
      @include margin($vertical: 0.5rem);
   }

   h4 {
      @include margin($vertical: 0.5rem);
   }

   a {
      @include color($color: variables.$color-highlight);
   }

   & > header {
      @include flex;
      @include margin($vertical: 1rem);
      @include center($horizontal: true);
      @include background($color: variables.$color-main, $shadow: true);
      @include size($width: variables.$page-width, $height: fit-content);

      & > h1 {
         @include center($horizontal: true);
         @include size($width: fit-content, $height: fit-content);
      }
   }
   & > main {
      @include margin($vertical: 10svh);
      @include center($horizontal: true);
      @include size($width: variables.$page-width, $height: fit-content);
      @include background($color: variables.$color-main, $shadow: true);
      @include grid($columns: 2fr 1fr, $rows: repeat(variables.$section-count, auto));

      & > aside {
         @include size($height: fit-content);
         @include margin($top: 1rem, $horizontal: 1rem);
         @include background($color: variables.$color-secondary-background-highlight);
         @include grid-item($column-start: 2, $width: 1, $row-start: 1, $height: variables.$section-count);

         & > section {
            @include flex;
            @include margin($all: 1rem);

            & > a {
               @include link($text-decoration: none);
               @include color($color: variables.$color-text);

               & > section {
                  @include margin($vertical: 0.5rem);

                  & > img {
                     @include image($object-fit: cover);
                     @include size($width: 5rem, $height: 5rem);
                  }

                  & > p {
                     @include text-align($vertical: center, $horizontal: left);
                  }
               }
            }

            &:nth-of-type(2),
            &:nth-of-type(3) {
               & > a {
                  & > section {
                     @include grid($columns: 5rem 1fr, $rows: 2);

                     & > img {
                        @include grid-item($column-start: 1, $width: 1, $row-start: 1, $height: 2);
                     }

                     & > p {
                        &:nth-of-type(1) {
                           @include grid-item($column-start: 2, $width: 1, $row-start: 1, $height: 1);
                        }

                        &:nth-of-type(2) {
                           @include grid-item($column-start: 2, $width: 1, $row-start: 2, $height: 1);
                        }
                     }
                  }
               }
            }

            &:nth-of-type(4) {
               & > a {
                  // & > section {
                     @include grid($columns: 5rem 1fr, $rows: 1);

                     & > img {
                        @include grid-item($column-start: 1, $width: 1, $row-start: 1, $height: 1);
                     }

                     & > p {
                        @include grid-item($column-start: 2, $width: 1, $row-start: 1, $height: 2);
                     }
                  // }
               }
            }
         }
      }

      & > section {
         @include flex;
         @include margin($all: 1rem);
         @include size($height: fit-content);
         @include background($color: variables.$color-main, $border: true);

         @for $index from 1 through variables.$section-count {
            &:nth-of-type(#{$index}) {
               @include grid-item($column-start: 1, $width: 1, $row-start: #{$index}, $height: 1);
            }
         }

         & > section {
            @include flex;
            @include margin($all: 1rem);
            @include size($height: fit-content);
            @include background($color: variables.$color-main);

            & > section {
               @include flex;
               @include margin($all: 1rem);
               @include size($height: fit-content);
               @include background($color: variables.$color-main);
            }
         }
      }
   }
}
