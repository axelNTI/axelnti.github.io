@use "variables";
@use "mixin" as *;

body {
   @include background($color: variables.$color-background);

   p {
      @include margin($vertical: variables.$margin-small);
   }

   li {
      @include margin($vertical: variables.$margin-small);
   }

   h1 {
      @include margin($vertical: variables.$margin-large);
   }

   h2 {
      @include margin($vertical: variables.$margin-medium);
   }

   h3 {
      @include margin($vertical: variables.$margin-medium);
   }

   h4 {
      @include margin($vertical: variables.$margin-medium);
   }

   a {
      @include color($color: variables.$color-highlight);
   }

   section {
      @include flex;
      @include margin($all: variables.$margin-large);
      @include size($height: fit-content);
   }

   & > header {
      @include flex;
      @include margin($vertical: variables.$margin-large);
      @include center($horizontal: true);
      @include background($color: variables.$color-main, $shadow: true);
      @include size($width: variables.$page-width, $height: fit-content);

      & > h1 {
         @include center($horizontal: true);
         @include size($width: fit-content, $height: fit-content);
      }
   }
   & > main {
      @include margin($vertical: 10svh);
      @include center($horizontal: true);
      @include size($width: variables.$page-width, $height: fit-content);
      @include background($color: variables.$color-main, $shadow: true);
      @include grid($columns: 2fr 1fr, $rows: repeat(variables.$section-count, auto));

      & > aside {
         @include size($height: fit-content);
         @include margin($top: variables.$margin-large, $horizontal: variables.$margin-large);
         @include background($color: variables.$color-secondary-background-highlight);
         @include grid-item($column-start: 2, $width: 1, $row-start: 1, $height: variables.$section-count);

         & > section {
            & > a {
               @include link($text-decoration: none);
               @include color($color: variables.$color-text);
               @include margin($vertical: variables.$margin-medium);

               & > img {
                  @include image($object-fit: cover);
                  @include size($both: variables.$spotify-stats-image-size);
               }

               & > p {
                  @include text-align($vertical: center, $horizontal: left);
                  @include margin($all: variables.$margin-small);
               }
            }

            &:nth-of-type(2),
            &:nth-of-type(3) {
               & > a {
                  @include grid($columns: variables.$spotify-stats-image-size 1fr, $rows: 2);

                  & > img {
                     @include grid-item($column-start: 1, $width: 1, $row-start: 1, $height: 2);
                  }

                  & > p {
                     &:nth-of-type(1) {
                        @include grid-item($column-start: 2, $width: 1, $row-start: 1, $height: 1);
                     }

                     &:nth-of-type(2) {
                        @include grid-item($column-start: 2, $width: 1, $row-start: 2, $height: 1);
                     }
                  }
               }
            }

            &:nth-of-type(4) {
               & > a {
                  @include grid($columns: variables.$spotify-stats-image-size 1fr, $rows: 1);

                  & > img {
                     @include grid-item($column-start: 1, $width: 1, $row-start: 1, $height: 1);
                  }

                  & > p {
                     @include grid-item($column-start: 2, $width: 1, $row-start: 1, $height: 2);
                  }
               }
            }
         }
      }

      & > section {
         @for $index from 1 through variables.$section-count {
            &:nth-of-type(#{$index}) {
               @include grid-item($column-start: 1, $width: 1, $row-start: #{$index}, $height: 1);
            }
         }
      }
   }
}
